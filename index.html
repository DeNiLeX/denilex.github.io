<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MapifyX</title>
    <!-- OpenLayers CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v7.3.0/ol.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <h1><i class="fas fa-globe"></i> MapifyX</h1>
            <button id="toggleFormBtn" class="btn btn-primary">
                <i class="fas fa-plus"></i> Agregar Proveedor
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="app-container">
        <!-- Panel Izquierdo -->
        <aside class="left-panel">
            <!-- Formulario Proveedor -->
            <section class="form-section card" id="formSection" style="display: none;">
                <h2><i class="fas fa-user-tie"></i> Agregar/Editar Proveedor</h2>
                <form id="providerForm" autocomplete="off">
                    <input type="hidden" id="providerId">
                    <div class="form-group">
                        <label for="name"><i class="fas fa-signature"></i> Nombre:</label>
                        <input type="text" id="name" required placeholder="Nombre del proveedor">
                    </div>
                    <div class="form-group">
                        <label for="address"><i class="fas fa-map-marker-alt"></i> Dirección:</label>
                        <input type="text" id="address" required placeholder="Dirección completa">
                    </div>
                    <div class="form-group">
                        <label for="phone"><i class="fas fa-phone"></i> Teléfono:</label>
                        <input type="text" id="phone" required placeholder="Número de teléfono">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="department"><i class="fas fa-map"></i> Departamento:</label>
                            <select id="department" required>
                                <option value="">Seleccionar...</option>
                                <option value="Alta Verapaz">Alta Verapaz</option>
                                <option value="Baja Verapaz">Baja Verapaz</option>
                                <option value="Chimaltenango">Chimaltenango</option>
                                <option value="Chiquimula">Chiquimula</option>
                                <option value="El Progreso">El Progreso</option>
                                <option value="Escuintla">Escuintla</option>
                                <option value="Guatemala">Guatemala</option>
                                <option value="Huehuetenango">Huehuetenango</option>
                                <option value="Izabal">Izabal</option>
                                <option value="Jalapa">Jalapa</option>
                                <option value="Jutiapa">Jutiapa</option>
                                <option value="Petén">Petén</option>
                                <option value="Quetzaltenango">Quetzaltenango</option>
                                <option value="Quiché">Quiché</option>
                                <option value="Retalhuleu">Retalhuleu</option>
                                <option value="Sacatepéquez">Sacatepéquez</option>
                                <option value="San Marcos">San Marcos</option>
                                <option value="Santa Rosa">Santa Rosa</option>
                                <option value="Sololá">Sololá</option>
                                <option value="Suchitepéquez">Suchitepéquez</option>
                                <option value="Totonicapán">Totonicapán</option>
                                <option value="Zacapa">Zacapa</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="municipality"><i class="fas fa-city"></i> Municipio:</label>
                            <input type="text" id="municipality" required placeholder="Municipio">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="zone"><i class="fas fa-map-pin"></i> Zona/Barrio/Colonia:</label>
                        <input type="text" id="zone" placeholder="Zona, barrio o colonia">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="latitude"><i class="fas fa-map-marked-alt"></i> Latitud:</label>
                            <input type="number" id="latitude" step="any" placeholder="Ej: 14.6349">
                        </div>
                        <div class="form-group">
                            <label for="longitude"><i class="fas fa-map-marked-alt"></i> Longitud:</label>
                            <input type="number" id="longitude" step="any" placeholder="Ej: -90.5069">
                        </div>
                        <div class="form-group">
                            <label for="radius"><i class="fas fa-ruler"></i> Radio de cobertura (m):</label>
                            <input type="number" id="radius" value="500" min="100">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="markerColor"><i class="fas fa-palette"></i> Color del marcador:</label>
                        <select id="markerColor" required>
                            <option value="azul">Azul claro</option>
                            <option value="rojo">Rojo claro</option>
                            <option value="verde">Verde claro</option>
                            <option value="amarillo">Amarillo claro</option>
                            <option value="morado">Morado claro</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="submit" id="saveBtn" class="btn btn-success">
                            <i class="fas fa-save"></i> Guardar Proveedor
                        </button>
                        <button type="button" id="cancelBtn" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="button" id="getLocation" class="btn btn-info">
                            <i class="fas fa-location-arrow"></i> Obtener Ubicación
                        </button>
                    </div>
                </form>
            </section>

            <!-- Lista de Proveedores -->
            <section class="list-section card" id="listSection">
                <div class="section-header">
                    <h2><i class="fas fa-list"></i> Lista de Proveedores</h2>
                    <div class="header-actions">
                        <div class="badge" id="providerCount">0 proveedores</div>
                        <button id="toggleHiddenBtn" class="btn btn-sm btn-secondary">
                            <i class="fas fa-eye"></i> Mostrar ocultos
                        </button>
                    </div>
                </div>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Buscar por nombre, teléfono...">
                </div>
                <div class="filter-controls">
                    <div class="filter-group">
                        <label for="filterDepartment"><i class="fas fa-filter"></i> Departamento:</label>
                        <select id="filterDepartment">
                            <option value="">Todos</option>
                            <option value="Alta Verapaz">Alta Verapaz</option>
                            <option value="Baja Verapaz">Baja Verapaz</option>
                            <option value="Chimaltenango">Chimaltenango</option>
                            <option value="Chiquimula">Chiquimula</option>
                            <option value="El Progreso">El Progreso</option>
                            <option value="Escuintla">Escuintla</option>
                            <option value="Guatemala">Guatemala</option>
                            <option value="Huehuetenango">Huehuetenango</option>
                            <option value="Izabal">Izabal</option>
                            <option value="Jalapa">Jalapa</option>
                            <option value="Jutiapa">Jutiapa</option>
                            <option value="Petén">Petén</option>
                            <option value="Quetzaltenango">Quetzaltenango</option>
                            <option value="Quiché">Quiché</option>
                            <option value="Retalhuleu">Retalhuleu</option>
                            <option value="Sacatepéquez">Sacatepéquez</option>
                            <option value="San Marcos">San Marcos</option>
                            <option value="Santa Rosa">Santa Rosa</option>
                            <option value="Sololá">Sololá</option>
                            <option value="Suchitepéquez">Suchitepéquez</option>
                            <option value="Totonicapán">Totonicapán</option>
                            <option value="Zacapa">Zacapa</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterMunicipality"><i class="fas fa-filter"></i> Municipio:</label>
                        <select id="filterMunicipality">
                            <option value="">Todos</option>
                        </select>
                    </div>
                </div>
                <div id="providerList" class="provider-list"></div>
            </section>
        </aside>

        <!-- Panel Derecho: Mapa -->
        <section class="map-section card">
            <div class="section-header">
                <h2><i class="fas fa-map-marked-alt"></i> Mapa de Proveedores</h2>
                <div class="map-search-container">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="mapSearchInput" placeholder="Busca en MapifyX">
                        <button id="searchMapBtn" class="btn btn-sm btn-primary">
                            <i class="fas fa-search-location"></i> Buscar
                        </button>
                    </div>
                </div>
                <div class="map-actions">
                    <button id="zoomIn" class="btn btn-sm btn-secondary"><i class="fas fa-search-plus"></i></button>
                    <button id="zoomOut" class="btn btn-sm btn-secondary"><i class="fas fa-search-minus"></i></button>
                    <button id="resetView" class="btn btn-sm btn-secondary"><i class="fas fa-globe-americas"></i> Guatemala</button>
                </div>
            </div>
            <div id="map" class="map-container"></div>
            <div class="map-legend">
                <span><img src="https://cdn.jsdelivr.net/gh/pointhi/leaflet-color-markers@master/img/marker-icon-blue.png" class="legend-icon" alt="Azul"> Azul: Técnicos</span>
                <span><img src="https://cdn.jsdelivr.net/gh/pointhi/leaflet-color-markers@master/img/marker-icon-red.png" class="legend-icon" alt="Rojo"> Rojo: Taller</span>
                <span><img src="https://cdn.jsdelivr.net/gh/pointhi/leaflet-color-markers@master/img/marker-icon-green.png" class="legend-icon" alt="Verde"> Verde: Médico</span>
                <span><img src="https://cdn.jsdelivr.net/gh/pointhi/leaflet-color-markers@master/img/marker-icon-gold.png" class="legend-icon" alt="Amarillo"> Amarillo: Vial</span>
                <span><img src="https://cdn.jsdelivr.net/gh/pointhi/leaflet-color-markers@master/img/marker-icon-violet.png" class="legend-icon" alt="Morado"> Morado: Otros</span>
            </div>
        </section>
    </main>

    <!-- Notificación -->
    <div class="notification" id="notification" style="display: none;"></div>

    <!-- Modal de Contraseña -->
    <div id="passwordDialog" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-lock"></i> Autenticación requerida</h3>
            <p>Ingrese la contraseña para continuar:</p>
            <input type="password" id="passwordInput" placeholder="Contraseña" autocomplete="current-password">
            <div class="modal-actions">
                <button id="cancelPassword" class="btn btn-outline">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button id="confirmPassword" class="btn btn-primary">
                    <i class="fas fa-check"></i> Aceptar
                </button>
            </div>
        </div>
    </div>

    <!-- Popup del Mapa -->
    <div id="popup" class="ol-popup">
        <button id="popup-closer" class="ol-popup-closer" aria-label="Cerrar ventana emergente">
            <i class="fas fa-times"></i>
        </button>
        <div id="popup-content">
            <h3 id="popup-title"></h3>
            <div id="popup-info"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/ol@v7.3.0/dist/ol.js"></script>
    <script src="js/app.js"></script>
</body>
</html>